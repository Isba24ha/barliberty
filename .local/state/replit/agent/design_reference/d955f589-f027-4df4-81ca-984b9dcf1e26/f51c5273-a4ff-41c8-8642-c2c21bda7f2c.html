<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BarManager Pro - Système de Gestion de Bar</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#1976D2',
                        secondary: '#388E3C',
                        accent: '#F57C00',
                        dark: {
                            100: '#1E1E1E',
                            200: '#2D2D2D',
                            300: '#3A3A3A',
                            400: '#4A4A4A'
                        }
                    },
                    fontFamily: {
                        'inter': ['Inter', 'sans-serif']
                    }
                }
            }
        }
    </script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .role-indicator {
            width: 4px;
            height: 100vh;
            position: fixed;
            top: 0;
            left: 0;
            z-index: 1000;
        }
        .role-cashier { background: #1976D2; }
        .role-server { background: #388E3C; }
        .role-manager { background: #F57C00; }
        .glass-effect {
            backdrop-filter: blur(10px);
            background: rgba(46, 46, 46, 0.8);
        }
        .table-occupied { background: #ef4444; }
        .table-free { background: #10b981; }
        .table-reserved { background: #f59e0b; }
    </style>
</head>

<body class="bg-gray-900 text-white min-h-screen">
    <!-- Role Indicator -->
    <div class="role-indicator role-cashier" data-role="cashier"></div>
    
    <!-- @COMPONENT: NavigationHeader -->
    <header class="bg-dark-100 border-b border-dark-300 px-6 py-4">
        <div class="flex items-center justify-between">
            <div class="flex items-center space-x-4">
                <div class="flex items-center space-x-2">
                    <i class="fas fa-glass-cheers text-2xl text-primary"></i>
                    <h1 class="text-xl font-bold">BarManager Pro</h1>
                </div>
                <div class="bg-primary px-3 py-1 rounded-full text-sm font-medium">
                    Caissier
                </div>
            </div>
            
            <div class="flex items-center space-x-4">
                <!-- Session Info -->
                <div class="bg-dark-200 px-4 py-2 rounded-lg">
                    <div class="flex items-center space-x-2">
                        <i class="fas fa-clock text-accent"></i>
                        <span class="text-sm">Session: Soir</span>
                        <span class="text-xs text-gray-400">19:45 - En cours</span>
                    </div>
                </div>
                
                <!-- User Profile -->
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 bg-primary rounded-full flex items-center justify-center">
                        <i class="fas fa-user text-white"></i>
                    </div>
                    <div>
                        <div class="text-sm font-medium" data-bind="currentUser.name">Marie Dubois</div>
                        <div class="text-xs text-gray-400">Caissière</div>
                    </div>
                    <button class="text-gray-400 hover:text-white">
                        <i class="fas fa-sign-out-alt"></i>
                    </button>
                </div>
            </div>
        </div>
    </header>
    <!-- @END_COMPONENT: NavigationHeader -->

    <div class="flex h-screen">
        <!-- @COMPONENT: Sidebar -->
        <aside class="w-64 bg-dark-100 border-r border-dark-300 pt-6">
            <nav class="space-y-2 px-4">
                <a href="#dashboard" class="flex items-center space-x-3 text-white bg-primary px-4 py-3 rounded-lg">
                    <i class="fas fa-tachometer-alt"></i>
                    <span>Tableau de bord</span>
                </a>
                <a href="#orders" class="flex items-center space-x-3 text-gray-300 hover:text-white hover:bg-dark-200 px-4 py-3 rounded-lg">
                    <i class="fas fa-shopping-cart"></i>
                    <span>Commandes</span>
                    <span class="ml-auto bg-accent text-white text-xs px-2 py-1 rounded-full">3</span>
                </a>
                <a href="#tables" class="flex items-center space-x-3 text-gray-300 hover:text-white hover:bg-dark-200 px-4 py-3 rounded-lg">
                    <i class="fas fa-table"></i>
                    <span>Tables</span>
                </a>
                <a href="#payments" class="flex items-center space-x-3 text-gray-300 hover:text-white hover:bg-dark-200 px-4 py-3 rounded-lg">
                    <i class="fas fa-credit-card"></i>
                    <span>Paiements</span>
                </a>
                <a href="#credits" class="flex items-center space-x-3 text-gray-300 hover:text-white hover:bg-dark-200 px-4 py-3 rounded-lg">
                    <i class="fas fa-file-invoice-dollar"></i>
                    <span>Crédits Clients</span>
                    <span class="ml-auto bg-red-500 text-white text-xs px-2 py-1 rounded-full">2</span>
                </a>
                <a href="#stats" class="flex items-center space-x-3 text-gray-300 hover:text-white hover:bg-dark-200 px-4 py-3 rounded-lg">
                    <i class="fas fa-chart-line"></i>
                    <span>Statistiques</span>
                </a>
            </nav>
            
            <!-- Session Controls -->
            <div class="px-4 mt-8">
                <div class="bg-dark-200 p-4 rounded-lg">
                    <h3 class="font-medium text-sm mb-3">Session Actuelle</h3>
                    <div class="space-y-2">
                        <div class="flex justify-between text-sm">
                            <span>Début:</span>
                            <span>19:45</span>
                        </div>
                        <div class="flex justify-between text-sm">
                            <span>Ventes:</span>
                            <span class="text-green-400">€245.60</span>
                        </div>
                        <div class="flex justify-between text-sm">
                            <span>Transactions:</span>
                            <span>18</span>
                        </div>
                    </div>
                    <button class="w-full bg-red-600 hover:bg-red-700 text-white py-2 rounded-lg mt-3 text-sm">
                        Fermer Session
                    </button>
                </div>
            </div>
        </aside>
        <!-- @END_COMPONENT: Sidebar -->

        <!-- Main Content -->
        <main class="flex-1 overflow-auto">
            <!-- @COMPONENT: DashboardContent -->
            <div class="p-6">
                <!-- Dashboard Header -->
                <div class="flex items-center justify-between mb-6">
                    <h2 class="text-2xl font-bold">Tableau de Bord - Caissier</h2>
                    <div class="flex items-center space-x-4">
                        <div class="text-sm text-gray-400">
                            Dernière mise à jour: <span data-bind="lastUpdate">21:34</span>
                        </div>
                        <button class="bg-primary hover:bg-blue-700 text-white px-4 py-2 rounded-lg">
                            <i class="fas fa-sync-alt mr-2"></i>
                            Actualiser
                        </button>
                    </div>
                </div>

                <!-- Stats Cards Row -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                    <div class="bg-dark-100 p-6 rounded-xl border border-dark-300">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm text-gray-400">Ventes Session</p>
                                <p class="text-2xl font-bold text-green-400" data-bind="sessionSales">€245.60</p>
                            </div>
                            <div class="w-12 h-12 bg-green-500 bg-opacity-20 rounded-full flex items-center justify-center">
                                <i class="fas fa-euro-sign text-green-400"></i>
                            </div>
                        </div>
                        <p class="text-xs text-gray-400 mt-2">+15.2% vs hier</p>
                    </div>

                    <div class="bg-dark-100 p-6 rounded-xl border border-dark-300">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm text-gray-400">Transactions</p>
                                <p class="text-2xl font-bold" data-bind="transactionCount">18</p>
                            </div>
                            <div class="w-12 h-12 bg-blue-500 bg-opacity-20 rounded-full flex items-center justify-center">
                                <i class="fas fa-receipt text-blue-400"></i>
                            </div>
                        </div>
                        <p class="text-xs text-gray-400 mt-2">3 en attente</p>
                    </div>

                    <div class="bg-dark-100 p-6 rounded-xl border border-dark-300">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm text-gray-400">Crédits Actifs</p>
                                <p class="text-2xl font-bold text-orange-400" data-bind="activeCredits">€89.20</p>
                            </div>
                            <div class="w-12 h-12 bg-orange-500 bg-opacity-20 rounded-full flex items-center justify-center">
                                <i class="fas fa-file-invoice-dollar text-orange-400"></i>
                            </div>
                        </div>
                        <p class="text-xs text-gray-400 mt-2">2 clients</p>
                    </div>

                    <div class="bg-dark-100 p-6 rounded-xl border border-dark-300">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm text-gray-400">Tables Occupées</p>
                                <p class="text-2xl font-bold" data-bind="occupiedTables">8/12</p>
                            </div>
                            <div class="w-12 h-12 bg-purple-500 bg-opacity-20 rounded-full flex items-center justify-center">
                                <i class="fas fa-table text-purple-400"></i>
                            </div>
                        </div>
                        <p class="text-xs text-gray-400 mt-2">67% occupation</p>
                    </div>
                </div>

                <!-- Two Column Layout -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <!-- Orders Panel -->
                    <div class="bg-dark-100 p-6 rounded-xl border border-dark-300">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-lg font-semibold">Commandes en Attente</h3>
                            <span class="bg-accent text-white px-2 py-1 rounded-full text-sm">3</span>
                        </div>
                        
                        <div class="space-y-3">
                            <!-- @MAP: pendingOrders.map(order => ( -->
                            <div class="bg-dark-200 p-4 rounded-lg">
                                <div class="flex items-center justify-between mb-2">
                                    <div class="flex items-center space-x-2">
                                        <span class="bg-accent text-white px-2 py-1 rounded text-sm">Table 5</span>
                                        <span class="text-sm text-gray-400">Serveur: Jean</span>
                                    </div>
                                    <span class="text-sm text-gray-400">21:28</span>
                                </div>
                                <div class="text-sm space-y-1">
                                    <div class="flex justify-between">
                                        <span>2x Bière Pression</span>
                                        <span>€8.00</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span>1x Plat du Jour</span>
                                        <span>€15.50</span>
                                    </div>
                                </div>
                                <div class="flex justify-between items-center mt-3 pt-2 border-t border-dark-300">
                                    <span class="font-medium">Total: €23.50</span>
                                    <button class="bg-primary hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm">
                                        Encaisser
                                    </button>
                                </div>
                            </div>
                            <!-- @END_MAP )) -->
                            
                            <div class="bg-dark-200 p-4 rounded-lg">
                                <div class="flex items-center justify-between mb-2">
                                    <div class="flex items-center space-x-2">
                                        <span class="bg-accent text-white px-2 py-1 rounded text-sm">Table 3</span>
                                        <span class="text-sm text-gray-400">Serveur: Sophie</span>
                                    </div>
                                    <span class="text-sm text-gray-400">21:25</span>
                                </div>
                                <div class="text-sm space-y-1">
                                    <div class="flex justify-between">
                                        <span>3x Café</span>
                                        <span>€7.50</span>
                                    </div>
                                    <div class="flex justify-between">
                                        <span>1x Dessert</span>
                                        <span>€6.00</span>
                                    </div>
                                </div>
                                <div class="flex justify-between items-center mt-3 pt-2 border-t border-dark-300">
                                    <span class="font-medium">Total: €13.50</span>
                                    <button class="bg-primary hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm">
                                        Encaisser
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Tables Overview -->
                    <div class="bg-dark-100 p-6 rounded-xl border border-dark-300">
                        <h3 class="text-lg font-semibold mb-4">État des Tables</h3>
                        
                        <div class="grid grid-cols-4 gap-3">
                            <!-- @MAP: tables.map(table => ( -->
                            <div class="bg-dark-200 p-3 rounded-lg text-center">
                                <div class="w-8 h-8 table-occupied mx-auto mb-2 rounded-full flex items-center justify-center">
                                    <span class="text-white text-sm font-medium">1</span>
                                </div>
                                <p class="text-xs text-gray-400">2 pers.</p>
                                <p class="text-xs text-green-400">€18.50</p>
                            </div>
                            <!-- @END_MAP )) -->
                            
                            <div class="bg-dark-200 p-3 rounded-lg text-center">
                                <div class="w-8 h-8 table-free mx-auto mb-2 rounded-full flex items-center justify-center">
                                    <span class="text-white text-sm font-medium">2</span>
                                </div>
                                <p class="text-xs text-gray-400">4 pers.</p>
                                <p class="text-xs text-gray-500">Libre</p>
                            </div>
                            
                            <div class="bg-dark-200 p-3 rounded-lg text-center">
                                <div class="w-8 h-8 table-occupied mx-auto mb-2 rounded-full flex items-center justify-center">
                                    <span class="text-white text-sm font-medium">3</span>
                                </div>
                                <p class="text-xs text-gray-400">4 pers.</p>
                                <p class="text-xs text-green-400">€13.50</p>
                            </div>
                            
                            <div class="bg-dark-200 p-3 rounded-lg text-center">
                                <div class="w-8 h-8 table-free mx-auto mb-2 rounded-full flex items-center justify-center">
                                    <span class="text-white text-sm font-medium">4</span>
                                </div>
                                <p class="text-xs text-gray-400">2 pers.</p>
                                <p class="text-xs text-gray-500">Libre</p>
                            </div>
                            
                            <div class="bg-dark-200 p-3 rounded-lg text-center">
                                <div class="w-8 h-8 table-occupied mx-auto mb-2 rounded-full flex items-center justify-center">
                                    <span class="text-white text-sm font-medium">5</span>
                                </div>
                                <p class="text-xs text-gray-400">6 pers.</p>
                                <p class="text-xs text-green-400">€23.50</p>
                            </div>
                            
                            <div class="bg-dark-200 p-3 rounded-lg text-center">
                                <div class="w-8 h-8 table-reserved mx-auto mb-2 rounded-full flex items-center justify-center">
                                    <span class="text-white text-sm font-medium">6</span>
                                </div>
                                <p class="text-xs text-gray-400">4 pers.</p>
                                <p class="text-xs text-yellow-400">Réservé</p>
                            </div>
                        </div>
                        
                        <div class="flex justify-between items-center mt-4 pt-4 border-t border-dark-300">
                            <div class="flex items-center space-x-4 text-sm">
                                <div class="flex items-center space-x-1">
                                    <div class="w-3 h-3 bg-red-500 rounded-full"></div>
                                    <span>Occupé</span>
                                </div>
                                <div class="flex items-center space-x-1">
                                    <div class="w-3 h-3 bg-green-500 rounded-full"></div>
                                    <span>Libre</span>
                                </div>
                                <div class="flex items-center space-x-1">
                                    <div class="w-3 h-3 bg-yellow-500 rounded-full"></div>
                                    <span>Réservé</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Credits Section -->
                <div class="mt-6 bg-dark-100 p-6 rounded-xl border border-dark-300">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-semibold">Crédits Clients Actifs</h3>
                        <button class="bg-accent hover:bg-orange-600 text-white px-4 py-2 rounded-lg text-sm">
                            <i class="fas fa-plus mr-2"></i>
                            Nouveau Client
                        </button>
                    </div>
                    
                    <div class="overflow-x-auto">
                        <table class="w-full text-sm">
                            <thead>
                                <tr class="border-b border-dark-300">
                                    <th class="text-left py-3">Client</th>
                                    <th class="text-left py-3">Crédit Total</th>
                                    <th class="text-left py-3">Dernière Commande</th>
                                    <th class="text-left py-3">Statut</th>
                                    <th class="text-left py-3">Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- @MAP: creditClients.map(client => ( -->
                                <tr class="border-b border-dark-300">
                                    <td class="py-3">
                                        <div>
                                            <div class="font-medium" data-bind="client.name">Jean Dupont</div>
                                            <div class="text-gray-400 text-xs">Client depuis 2023</div>
                                        </div>
                                    </td>
                                    <td class="py-3">
                                        <span class="text-orange-400 font-medium" data-bind="client.creditAmount">€45.20</span>
                                    </td>
                                    <td class="py-3">
                                        <span class="text-gray-400" data-bind="client.lastOrder">19/01/2024</span>
                                    </td>
                                    <td class="py-3">
                                        <span class="bg-orange-500 bg-opacity-20 text-orange-400 px-2 py-1 rounded-full text-xs">
                                            Actif
                                        </span>
                                    </td>
                                    <td class="py-3">
                                        <div class="flex space-x-2">
                                            <button class="bg-primary hover:bg-blue-700 text-white px-3 py-1 rounded text-xs">
                                                Paiement
                                            </button>
                                            <button class="bg-gray-600 hover:bg-gray-700 text-white px-3 py-1 rounded text-xs">
                                                Historique
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                                <!-- @END_MAP )) -->
                                
                                <tr class="border-b border-dark-300">
                                    <td class="py-3">
                                        <div>
                                            <div class="font-medium">Marie Martin</div>
                                            <div class="text-gray-400 text-xs">Client depuis 2022</div>
                                        </div>
                                    </td>
                                    <td class="py-3">
                                        <span class="text-orange-400 font-medium">€44.00</span>
                                    </td>
                                    <td class="py-3">
                                        <span class="text-gray-400">18/01/2024</span>
                                    </td>
                                    <td class="py-3">
                                        <span class="bg-orange-500 bg-opacity-20 text-orange-400 px-2 py-1 rounded-full text-xs">
                                            Actif
                                        </span>
                                    </td>
                                    <td class="py-3">
                                        <div class="flex space-x-2">
                                            <button class="bg-primary hover:bg-blue-700 text-white px-3 py-1 rounded text-xs">
                                                Paiement
                                            </button>
                                            <button class="bg-gray-600 hover:bg-gray-700 text-white px-3 py-1 rounded text-xs">
                                                Historique
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <!-- @END_COMPONENT: DashboardContent -->
        </main>
    </div>

    <!-- @COMPONENT: PaymentModal -->
    <div id="paymentModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="bg-dark-100 rounded-xl p-6 w-full max-w-md mx-4">
            <div class="flex items-center justify-between mb-4">
                <h3 class="text-lg font-semibold">Traitement du Paiement</h3>
                <button class="text-gray-400 hover:text-white">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="space-y-4">
                <div class="bg-dark-200 p-4 rounded-lg">
                    <div class="flex justify-between items-center mb-2">
                        <span class="font-medium">Table 5</span>
                        <span class="text-green-400 font-bold">€23.50</span>
                    </div>
                    <div class="text-sm text-gray-400">
                        2x Bière Pression, 1x Plat du Jour
                    </div>
                </div>
                
                <div class="grid grid-cols-3 gap-3">
                    <button class="bg-green-600 hover:bg-green-700 text-white py-3 rounded-lg text-center">
                        <i class="fas fa-money-bill-wave block mb-1"></i>
                        <span class="text-sm">Espèces</span>
                    </button>
                    <button class="bg-blue-600 hover:bg-blue-700 text-white py-3 rounded-lg text-center">
                        <i class="fas fa-credit-card block mb-1"></i>
                        <span class="text-sm">Carte</span>
                    </button>
                    <button class="bg-orange-600 hover:bg-orange-700 text-white py-3 rounded-lg text-center">
                        <i class="fas fa-file-invoice-dollar block mb-1"></i>
                        <span class="text-sm">Crédit</span>
                    </button>
                </div>
                
                <div class="space-y-2">
                    <label class="block text-sm font-medium">Montant reçu (€)</label>
                    <input type="number" class="w-full bg-dark-200 border border-dark-300 rounded-lg px-4 py-2 text-white" placeholder="23.50">
                </div>
                
                <div class="flex space-x-3">
                    <button class="flex-1 bg-gray-600 hover:bg-gray-700 text-white py-2 rounded-lg">
                        Annuler
                    </button>
                    <button class="flex-1 bg-primary hover:bg-blue-700 text-white py-2 rounded-lg">
                        Valider
                    </button>
                </div>
            </div>
        </div>
    </div>
    <!-- @END_COMPONENT: PaymentModal -->

    <!-- @COMPONENT: RoleSwitcher -->
    <div class="fixed bottom-6 right-6 z-40">
        <div class="bg-dark-100 rounded-xl p-4 border border-dark-300">
            <div class="text-sm font-medium mb-2">Changer de Vue</div>
            <div class="space-y-2">
                <button onclick="switchRole('cashier')" class="w-full text-left px-3 py-2 rounded-lg bg-primary text-white">
                    <i class="fas fa-cash-register mr-2"></i>
                    Caissier
                </button>
                <button onclick="switchRole('server')" class="w-full text-left px-3 py-2 rounded-lg bg-dark-200 text-gray-300 hover:bg-secondary hover:text-white">
                    <i class="fas fa-user-tie mr-2"></i>
                    Serveur
                </button>
                <button onclick="switchRole('manager')" class="w-full text-left px-3 py-2 rounded-lg bg-dark-200 text-gray-300 hover:bg-accent hover:text-white">
                    <i class="fas fa-user-cog mr-2"></i>
                    Gérant
                </button>
            </div>
        </div>
    </div>
    <!-- @END_COMPONENT: RoleSwitcher -->

    <script>
        (function() {
            // Role switching functionality
            function switchRole(role) {
                const roleIndicator = document.querySelector('.role-indicator');
                const roleClasses = {
                    'cashier': 'role-cashier',
                    'server': 'role-server', 
                    'manager': 'role-manager'
                };
                
                // Remove all role classes
                Object.values(roleClasses).forEach(cls => {
                    roleIndicator.classList.remove(cls);
                });
                
                // Add new role class
                roleIndicator.classList.add(roleClasses[role]);
                roleIndicator.dataset.role = role;
                
                // TODO: Implement role-specific UI changes
                console.log('Switched to role:', role);
            }
            
            // Make function globally available
            window.switchRole = switchRole;
            
            // Payment modal functionality
            const paymentModal = document.getElementById('paymentModal');
            
            // Show modal when clicking payment buttons
            document.querySelectorAll('button:contains("Encaisser")').forEach(button => {
                button.addEventListener('click', function() {
                    paymentModal.classList.remove('hidden');
                    paymentModal.classList.add('flex');
                });
            });
            
            // Close modal functionality
            paymentModal.addEventListener('click', function(e) {
                if (e.target === paymentModal || e.target.classList.contains('fa-times')) {
                    paymentModal.classList.add('hidden');
                    paymentModal.classList.remove('flex');
                }
            });
            
            // Auto-refresh functionality
            setInterval(function() {
                // TODO: Implement real-time data refresh
                const timestamp = document.querySelector('[data-bind="lastUpdate"]');
                if (timestamp) {
                    timestamp.textContent = new Date().toLocaleTimeString('fr-FR', { 
                        hour: '2-digit', 
                        minute: '2-digit' 
                    });
                }
            }, 30000); // Refresh every 30 seconds
            
            // Table status click handlers
            document.querySelectorAll('.table-occupied, .table-free, .table-reserved').forEach(table => {
                table.addEventListener('click', function() {
                    // TODO: Implement table detail view
                    console.log('Table clicked:', this.textContent);
                });
            });
            
            // Session management
            function updateSessionStats() {
                // TODO: Implement real-time session statistics update
                console.log('Updating session stats...');
            }
            
            // Initialize real-time updates
            updateSessionStats();
        })();
    </script>
</body>
</html>